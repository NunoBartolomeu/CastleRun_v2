<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Castle Run - Map Visualizer</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <h1>ğŸ° Castle Run - Map Visualizer</h1>
  </header>
  
  <main>
    <div id="canvas-container">
      <canvas id="canvas"></canvas>
    </div>
    
    <aside>
      <div class="section">
        <h2>Configuration</h2>
        <div class="config-grid">
          <div class="input-group">
            <label>Width</label>
            <input type="number" id="width" value="100" min="7" max="1000">
          </div>
          <div class="input-group">
            <label>Height</label>
            <input type="number" id="height" value="100" min="7" max="1000">
          </div>
          <div class="input-group">
            <label>Target %</label>
            <input type="number" id="target" value="50" min="1" max="70">
          </div>
          <div class="input-group">
            <label>Seed</label>
            <input type="number" id="seed" value="12345">
          </div>
          <div class="input-group">
            <label>Break Weight</label>
            <input type="number" id="breakWeight" value="5" min="1">
          </div>
          <div class="input-group">
            <label>Backtrack Weight</label>
            <input type="number" id="backtrackWeight" value="1" min="1">
          </div>
          <div class="input-group">
            <label>Sections X</label>
            <input type="number" id="sectionsX" value="1" min="1" max="20">
          </div>
          <div class="input-group">
            <label>Sections Y</label>
            <input type="number" id="sectionsY" value="1" min="1" max="20">
          </div>
        </div>
        <button id="generate">Generate Map</button>
      </div>
      
      <div class="section" id="visualizer-section" style="display: none;">
        <h2>Visualizer Controls</h2>
        <div id="step-info">
          <div>Step: <span id="current-step">0</span> / <span id="total-steps">0</span></div>
          <div>Action: <span id="current-action">-</span></div>
          <div>Position: <span id="current-position">-</span></div>
        </div>
        
        <div class="controls">
          <button id="zoom-out">ğŸ”- Zoom Out</button>
          <button id="zoom-in">ğŸ”+ Zoom In</button>
        </div>
        
        <div class="controls">
          <button id="first">â® First</button>
          <button id="last">â­ Last</button>
          <button id="prev-break">âª Prev Break</button>
          <button id="next-break">â© Next Break</button>
          <button id="prev">â—€ Previous</button>
          <button id="next">â–¶ Next</button>
          <button id="play">â–¶ Play</button>
          <button id="reset">ğŸ”„ Reset View</button>
        </div>
      </div>
      
      <div class="section" id="stats-section" style="display: none;">
        <h2>Statistics</h2>
        <div id="stats"></div>
      </div>
      
      <div class="section">
        <h2>Save / Load</h2>
        <button id="save">ğŸ’¾ Save Map</button>
        <button id="load">ğŸ“‚ Load Map</button>
        <input type="file" id="file-input" accept=".json">
      </div>
      
      <div class="section">
        <h2>Legend</h2>
        <div class="legend">
          <div class="legend-item">
            <div class="legend-color" style="background: #8b4513;"></div>
            <span>Wall</span>
          </div>
          <div class="legend-item">
            <div class="legend-color" style="background: #f0f0f0;"></div>
            <span>Floor</span>
          </div>
          <div class="legend-item">
            <div class="legend-color" style="background: #000;"></div>
            <span>Void</span>
          </div>
          <div class="legend-item">
            <div class="legend-color" style="background: #3b82f6;"></div>
            <span>Miner</span>
          </div>
        </div>
      </div>
    </aside>
  </main>
  
  <script type="module" src="app.js"></script>
</body>
</html>